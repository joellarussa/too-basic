{% paginate collections.all.products by 5 %}
  <div class="product-grid">
    {% for product in collections.all.products %}
      <div class="product-item">
        <a href="{{ product.url }}">
          {% if product.featured_image %}
            <img
              src="{{ product.featured_image | image_url: width: 750, height: 750 }}"
              alt="{{ product.title }}"
              width="{{ product.featured_image.width }}"
              height="{{ product.featured_image.height }}"
            >
          {% else %}
            <img
              src="{{ '300x300.png' | asset_url }}"
              alt="No image available"
              width="300"
              height="300"
            >
          {% endif %}
          <h2>{{ product.title }}</h2>
          <p>{{ product.price | money }}</p>
        </a>
        <form action="/cart/add" method="post" enctype="multipart/form-data">
          <input type="hidden" name="id" value="{{ product.variants.first.id }}">
          <button type="submit" class="btn">Add to Cart</button>
        </form>
      </div>
    {% endfor %}
  </div>

  <div class="pagination">
    {% if paginate.previous %}
      <a href="{{ paginate.previous.url }}">Previous</a>
    {% endif %}

    {% for part in paginate.parts %}
      {% if part.is_link %}
        <a href="{{ part.url }}">{{ part.title }}</a>
      {% else %}
        <span class="current">{{ part.title }}</span>
      {% endif %}
    {% endfor %}

    {% if paginate.next %}
      <a href="{{ paginate.next.url }}">Next</a>
    {% endif %}
  </div>
{% endpaginate %}
